{{ define "content" }}
<div class="space-y-8 max-w-2xl">
    <div>
        <h2 class="text-xl font-bold text-white mb-4">Server Settings</h2>
        <p class="text-zinc-400 text-sm mb-6">Manage the cluster configuration and lifecycle.</p>
    </div>

    {{ if .Error }}
    <div class="bg-red-500/10 border border-red-500/50 rounded-lg p-4">
        <div class="flex items-center gap-2 text-red-400">
            <i data-lucide="alert-circle" size="16"></i>
            <span class="text-sm font-medium">{{ .Error }}</span>
        </div>
    </div>
    {{ end }}

    <!-- Connection Info -->
    <div class="bg-surface border border-border rounded-xl overflow-hidden">
        <div class="p-6 border-b border-border">
            <h3 class="text-lg font-medium text-white">Connection</h3>
        </div>
        <div class="p-4 flex justify-between items-center hover:bg-white/5">
            <span class="text-sm text-zinc-400">Endpoint</span>
            <span class="text-sm text-white font-mono">{{ .Endpoint }}</span>
        </div>
    </div>

    {{ if .ServerInfo }}
    <!-- Server Actions -->
    <div class="bg-surface border border-border rounded-xl overflow-hidden">
        <div class="p-6 border-b border-border">
            <h3 class="text-lg font-medium text-white">Power Operations</h3>
            <p class="text-sm text-zinc-500 mt-1">Restart the MinIO service (requires admin permissions).</p>
        </div>
        <div class="p-6 bg-zinc-900/30 flex items-center justify-between">
            <div>
                <div class="font-medium text-white">Restart Service</div>
                <div class="text-xs text-zinc-500 mt-1">Apply configuration changes or reload certificates.</div>
            </div>
            <form hx-post="/settings/restart" hx-confirm="Restart MinIO service? This will briefly interrupt service.">
                <button type="submit" class="bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2">
                    <i data-lucide="refresh-cw" size="16"></i> Restart
                </button>
            </form>
        </div>
    </div>
    {{ end }}

    {{ if .StorageInfo }}
    <!-- Storage Usage -->
    <div class="bg-surface border border-border rounded-xl overflow-hidden">
        <div class="p-6 border-b border-border">
            <h3 class="text-lg font-medium text-white">Storage Usage</h3>
            <p class="text-sm text-zinc-500 mt-1">Cluster-wide storage statistics</p>
        </div>
        <div class="divide-y divide-border">
            <div class="p-4 flex justify-between items-center hover:bg-white/5">
                <span class="text-sm text-zinc-400">Total Capacity</span>
                <span class="text-sm text-white font-mono">{{ .StorageInfo.TotalCapacity }}</span>
            </div>
            <div class="p-4 flex justify-between items-center hover:bg-white/5">
                <span class="text-sm text-zinc-400">Used Space</span>
                <span class="text-sm text-white font-mono">{{ .StorageInfo.ObjectsTotalSize }}</span>
            </div>
            <div class="p-4 flex justify-between items-center hover:bg-white/5">
                <span class="text-sm text-zinc-400">Total Objects</span>
                <span class="text-sm text-white">{{ .StorageInfo.ObjectsTotalCount }}</span>
            </div>
            <div class="p-4 flex justify-between items-center hover:bg-white/5">
                <span class="text-sm text-zinc-400">Total Buckets</span>
                <span class="text-sm text-white">{{ .StorageInfo.BucketsCount }}</span>
            </div>
        </div>
    </div>
    {{ end }}

    {{ if .ServerInfo }}
    <!-- Server Info -->
    <div class="bg-surface border border-border rounded-xl overflow-hidden">
        <div class="p-6 border-b border-border">
            <h3 class="text-lg font-medium text-white">Server Information</h3>
        </div>
        <div class="divide-y divide-border">
            {{ range .ServerInfo.Servers }}
            <div class="p-4 flex justify-between items-center hover:bg-white/5">
                <span class="text-sm text-zinc-400">Server</span>
                <span class="text-sm text-white font-mono">{{ .Endpoint }}</span>
            </div>
            <div class="p-4 flex justify-between items-center hover:bg-white/5">
                <span class="text-sm text-zinc-400">Version</span>
                <span class="text-sm text-white font-mono">{{ .Version }}</span>
            </div>
            <div class="p-4 flex justify-between items-center hover:bg-white/5">
                <span class="text-sm text-zinc-400">Uptime</span>
                <span class="text-sm text-white">{{ .Uptime }}</span>
            </div>
            <div class="p-4 flex justify-between items-center hover:bg-white/5">
                <span class="text-sm text-zinc-400">State</span>
                <span class="text-sm text-white">{{ .State }}</span>
            </div>
            <div class="p-4 flex justify-between items-center hover:bg-white/5">
                <span class="text-sm text-zinc-400">Disks</span>
                <span class="text-sm text-white">{{ len .Disks }} drives</span>
            </div>
            {{ end }}
        </div>
    </div>
    {{ end }}

    {{ if .Config }}
    <!-- Configuration -->
    <div class="bg-surface border border-border rounded-xl overflow-hidden">
        <div class="p-6 border-b border-border">
            <h3 class="text-lg font-medium text-white">Configuration</h3>
            <p class="text-sm text-zinc-500 mt-1">Current server configuration (admin only)</p>
        </div>
        <div class="p-4">
            <details class="group">
                <summary class="cursor-pointer text-sm text-zinc-400 hover:text-white flex items-center gap-2">
                    <i data-lucide="chevron-right" size="16" class="group-open:rotate-90 transition-transform"></i>
                    View Configuration
                </summary>
                <pre class="mt-4 p-4 bg-zinc-900 rounded-lg text-xs text-zinc-300 overflow-x-auto">{{ .Config }}</pre>
            </details>
        </div>
    </div>
    {{ end }}

    <!-- Session -->
    <div class="bg-surface border border-border rounded-xl overflow-hidden">
        <div class="p-6 border-b border-border">
            <h3 class="text-lg font-medium text-white">Session</h3>
            <p class="text-sm text-zinc-500 mt-1">Manage your current session.</p>
        </div>
        <div class="p-6 bg-zinc-900/30 flex items-center justify-between">
            <div>
                <div class="font-medium text-white">Sign Out</div>
                <div class="text-xs text-zinc-500 mt-1">End your current session securely.</div>
            </div>
            <a href="/logout" class="bg-red-500/10 hover:bg-red-500/20 border border-red-500/50 text-red-500 px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2">
                <i data-lucide="log-out" size="16"></i> Sign Out
            </a>
        </div>
    </div>
</div>
{{ end }}
