{{ define "users_widget" }}
<div class="bg-surface border border-border rounded-xl p-5">
    <div class="flex justify-between items-start mb-4">
        <div class="p-2 bg-zinc-800/50 rounded-lg text-zinc-400"><i data-lucide="users"></i></div>
        {{ if not .Error }}
        <span class="text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded">Active</span>
        {{ end }}
    </div>
    {{ if .Error }}
    <div class="text-2xl font-bold text-white mb-1">--</div>
    <div class="text-sm text-zinc-500 font-medium">Identity Users</div>
    <div class="text-xs text-zinc-600 mt-2">Unable to load</div>
    {{ else }}
    <div class="text-2xl font-bold text-white mb-1">{{ .TotalUsers }}</div>
    <div class="text-sm text-zinc-500 font-medium">Identity Users</div>
    <div class="text-xs text-zinc-600 mt-2">{{ .ActiveUsers }} active</div>
    {{ if gt .ServiceAccounts 0 }}
    <div class="text-xs text-zinc-600 mt-1">{{ .ServiceAccounts }} service accounts ({{ .ActiveServiceAccounts }} active)</div>
    {{ end }}
    {{ end }}
</div>
{{ end }}
